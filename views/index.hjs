<!DOCTYPE html>
<html>
<head>
</head>

<body class="layout layout-header-fixed">
<div class="main pull-center">
    <h1>PayUBiz Payment Request Form </h1>
    <h2>PayU Form</h2>
    <br/> {{% if error %}}

    <span style="color:red">Please fill all mandatory fields.</span>
    <br/>
    <br/> {{% endif %}}
    <div class=" login-body">
        <form action='#' method="post" name="payuForm" class="form" id="submit_form">
            <table class="demo-form-wrapper form-group">
                <tr>
                    <td>
                        <b>Mandatory Parameters</b>
                    </td>
                </tr>
                <tr>
                    <td>Amount: </td>
                    <td>
                        <input name="amount" value="600.000" class="form-control" />
                    </td>
                    <td>First Name: </td>
                    <td>
                        <input name="firstname" id="firstname" value="Bismah Qadri" class="form-control" />
                    </td>
                </tr>
                <tr>
                    <td>Email: </td>
                    <td>
                        <input name="email" id="email" value="bismahqadri@gmail.com" class="form-control" type="email" />
                    </td>
                    <td>Phone: </td>
                    <td>
                        <input name="phone" value="9999999999" class="form-control" />
                    </td>
                </tr>
                <tr>
                    <td>Product Info: </td>
                    <td colspan="3">
                        <input name="productinfo" class="form-control" value="Testing pay u biz"/>
                    </td>
                </tr>
                </tr>
                <tr>
                    <td>
                        <b>Optional Parameters</b>
                    </td>
                </tr>
                <tr>
                    <td>Last Name: </td>
                    <td>
                        <input name="lastname" id="lastname" value="{{ posted.lastname }}" class="form-control" />
                    </td>
                </tr>
                <tr>
                    <td>Address1: </td>
                    <td>
                        <input name="address1" value="{{ posted.address1 }}" class="form-control" />
                    </td>
                    <td>Address2: </td>
                    <td>
                        <input name="address2" value="{{ posted.address2 }}" class="form-control" />
                    </td>
                </tr>
                <tr>
                    <td>City: </td>
                    <td>
                        <input name="city" value="{{ posted.city }}" class="form-control" />
                    </td>
                    <td>State: </td>
                    <td>
                        <input name="state" value="{{ posted.state }}" class="form-control" />
                    </td>
                </tr>
                <tr>
                    <td>Country: </td>
                    <td>
                        <input name="country" value="{{ posted.country }}" class="form-control" />
                    </td>
                    <td>Zipcode: </td>
                    <td>
                        <input name="zipcode" value="{{ posted.zipcode }}" class="form-control" />
                    </td>
                </tr>

                <td colspan="4">
                    <input type="submit" value="Submit" class="btn btn-primary pull-right" data-toggle="modal" data-target="#paymentModal" />
                </td>


                </tr>
            </table>
        </form>
    </div>
</div>
<div id="paymentModal" class="modal in" role="dialog">
    <div class="modal-dialog modal-lg">
        <div class="modal-content animated bounceIn">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-hidden="true"></button>
                <h4 class="modal-title">Payment</h4>
            </div>
            <div class="modal-body form " style="margin-top: 40px">
                <form id="submitForm" action="https://test.payu.in/_payment" method="POST">
                    <input type="hidden" name="firstname" id="first" />
                    <input type="hidden" name="lastname" id="last" />
                    <input type="hidden" name="surl" id="surl" />
                    <input type="hidden" name="phone" id="phone" />
                    <input type="hidden" name="key" id="key" />
                    <input type="hidden" name="hash" id = "hash" />
                    <input type="hidden" name="curl" id="curl" />
                    <input type="hidden" name="furl" id="furl" />
                    <input type="hidden" name="txnid" id="txnid" />
                    <input type="hidden" name="productinfo" id="productinfo" />
                    <input type="hidden" name="amount" id="amount" />
                    <input type="hidden" name="email" id="emaill" />
                    <br/>
                    <label>Are You Sure You Want To Continue?</label>
                    <input type= "submit" value="submit">

                </form>
        </div>
    </div>
</div>
</div>
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script>
    $(document).ready(function () {
        $('#submit_form' ).submit( function( e ) {
            let data = {
                "firstname":"Bismah Qadri",
                "lastname":"",
                "phone":"9999999999",
                "productinfo":"Testing pay u biz",
                "amount":600,
                "email":"bismahqadri@gmail.com"
            }
            e.preventDefault();
            axios.post('/payUBiz',data).then(function (response) {
                $('#paymentModal').show()
                let data = response.data
                $('#first').val(data.firstname)
                $('#last').val(data.lastname)
                $('#surl').val(data.surl)
                $('#phone').val(data.phone)
                $('#key').val(data.key)
                $('#hash').val(data.hash)
                $('#curl').val(data.curl)
                $('#furl').val(data.furl)
                $('#txnid').val(data.txnid)
                $('#productinfo').val(data.productinfo)
                $('#amount').val(data.amount)
                $('#emaill').val(data.email)
            })
        })
    })
</script>
</body>
</html>
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.18.0/axios.min.js"></script>